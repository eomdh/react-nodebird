{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[15],{RNiq:function(e,t,n){\"use strict\";n.r(t),n.d(t,\"__N_SSP\",(function(){return p}));var c=n(\"q1tI\"),i=n(\"/MKj\"),r=n(\"1zst\"),a=n(\"kduo\"),o=n(\"ODXe\"),l=n(\"p+NB\"),s=n(\"3zrx\"),u=n(\"Vl3Y\"),d=n(\"5rEg\"),j=n(\"2/Rp\"),f=n(\"nKUr\"),b=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.post})),n=t.imagePaths,r=t.addPostDone,a=Object(s.a)(\"\"),b=Object(o.a)(a,3),p=b[0],O=b[1],h=b[2];Object(c.useEffect)((function(){r&&h(\"\")}),[r]);var m=Object(c.useCallback)((function(){if(!p||!p.trim())return alert(\"\\uac8c\\uc2dc\\uae00\\uc744 \\uc791\\uc131\\ud558\\uc138\\uc694.\");var t=new FormData;n.forEach((function(e){t.append(\"image\",e)})),t.append(\"content\",p),e({type:l.e,data:t})}),[p,n]),v=Object(c.useRef)(),w=Object(c.useCallback)((function(){v.current.click()}),[v.current]),x=Object(c.useCallback)((function(t){console.log(\"images\",t.target.files);var n=new FormData;return[].forEach.call(t.target.files,(function(e){n.append(\"image\",e)})),e({type:l.G,data:n})}),[]),g=Object(c.useCallback)((function(t){return function(){e({type:l.v,data:t})}}));return Object(f.jsxs)(u.a,{style:{margin:\"10px 0 20px\"},encType:\"multipart/form-data\",onFinish:m,children:[Object(f.jsx)(d.a.TextArea,{value:p,onChange:O,maxLength:140,placeholder:\"\\uc5b4\\ub5a4 \\uc77c\\uc774 \\uc788\\uc5c8\\ub098\\uc694?\"}),Object(f.jsxs)(\"div\",{children:[Object(f.jsx)(\"input\",{type:\"file\",name:\"image\",multiple:!0,hidden:!0,ref:v,onChange:x}),Object(f.jsx)(j.a,{onClick:w,children:\"\\uc774\\ubbf8\\uc9c0 \\uc5c5\\ub85c\\ub4dc\"}),Object(f.jsx)(j.a,{type:\"primary\",style:{float:\"right\"},htmlType:\"submit\",children:\"\\uc9f9\\uc9f9\"})]}),Object(f.jsx)(\"div\",{children:n&&n.map((function(e,t){return Object(f.jsxs)(\"div\",{style:{display:\"inline-block\"},children:[Object(f.jsx)(\"img\",{src:\"http://localhost:3065/\".concat(e),style:{width:\"200px\"},alt:e}),Object(f.jsx)(\"div\",{children:Object(f.jsx)(j.a,{onClick:g(t),children:\"\\uc81c\\uac70\"})})]},e)}))})]})},p=!0;t.default=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.user})).me,n=Object(i.c)((function(e){return e.post})),o=n.mainPosts,s=n.hasMorePosts,u=n.loadPostsLoading,d=n.retweetError;return Object(c.useEffect)((function(){d&&alert(d)}),[d]),Object(c.useEffect)((function(){function t(){if(window.scrollY+document.documentElement.clientHeight>document.documentElement.scrollHeight-400&&s&&!u){var t,n=null===(t=o[o.length-1])||void 0===t?void 0:t.id;e({type:l.n,lastId:n})}}return window.addEventListener(\"scroll\",t),function(){window.removeEventListener(\"scroll\",t)}}),[s,u]),Object(f.jsxs)(r.a,{children:[t&&Object(f.jsx)(b,{}),o.map((function(e){return Object(f.jsx)(a.a,{post:e},e.id)}))]})}},vlRD:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/\",function(){return n(\"RNiq\")}])}},[[\"vlRD\",1,2,6,0,3,4,5,7]]]);","map":{"version":3,"sources":["static/chunks/pages/index-2bfef091e37047601754.js"],"names":["_N_E","window","push","RNiq","module","__webpack_exports__","__webpack_require__","r","d","__N_SSP","react","es","AppLayout","PostCard","slicedToArray","reducers_post","useInput","es_form","input","es_button","jsx_runtime","components_PostForm","dispatch","Object","_useSelector","state","post","imagePaths","addPostDone","_useInput","_useInput2","text","onChangeText","setText","onSubmitPost","trim","alert","formData","FormData","forEach","p","append","type","data","imageInput","onClickImageUpload","current","click","onChangeImages","e","console","log","target","files","imageFormData","call","f","onRemoveImage","index","style","margin","encType","onFinish","children","TextArea","value","onChange","maxLength","placeholder","name","multiple","hidden","ref","onClick","float","htmlType","map","v","i","display","src","concat","width","alt","me","user","_useSelector2","mainPosts","hasMorePosts","loadPostsLoading","retweetError","onScroll","scrollY","document","documentElement","clientHeight","scrollHeight","_mainPosts","lastId","length","id","addEventListener","removeEventListener","vlRD","exports","__NEXT_P"],"mappings":"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"},"extractedComments":[]}